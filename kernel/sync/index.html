<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Synchronisation primitives."><meta name="keywords" content="rust, rustlang, rust-lang, sync"><title>kernel::sync - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><script defer src="../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../../logo.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a class="sidebar-logo" href="../../kernel/index.html"><div class="logo-container"><img class="rust-logo" src="../../logo.svg" alt="logo"></div>
        </a><h2 class="location">Module sync</h2><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li></ul></div><div id="sidebar-vars" data-name="sync" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../kernel/index.html"><img class="rust-logo" src="../../logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">kernel</a>::<wbr><a class="mod" href="#">sync</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/kernel/sync/mod.rs.html#3-157" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Synchronisation primitives.</p>
<p>This module contains the kernel APIs related to synchronisation that have been ported or
wrapped for usage by Rust code in the kernel and is shared by all of them.</p>
<h2 id="example" class="section-header"><a href="#example">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// SAFETY: `init` is called below.</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">data</span> <span class="op">=</span> <span class="ident">Pin::from</span>(<span class="ident">Box::new</span>(<span class="kw">unsafe</span> { <span class="ident">Mutex::new</span>(<span class="number">0</span>) }));
<span class="macro">mutex_init!</span>(<span class="ident">data</span>.<span class="ident">as_mut</span>(), <span class="string">&quot;test::data&quot;</span>);
<span class="kw-2">*</span><span class="ident">data</span>.<span class="ident">lock</span>() <span class="op">=</span> <span class="number">10</span>;
<span class="macro">pr_info!</span>(<span class="string">&quot;{}\n&quot;</span>, <span class="kw-2">*</span><span class="ident">data</span>.<span class="ident">lock</span>());</code></pre></div>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CondVar.html" title="kernel::sync::CondVar struct">CondVar</a></div><div class="item-right docblock-short"><p>Exposes the kernel’s <a href="../../../include/linux/wait.h"><code>struct wait_queue_head</code></a> as a condition variable. It allows the caller to
atomically release the given lock and go to sleep. It reacquires the lock when it wakes up. And
it wakes up when notified by another thread (via <a href="struct.CondVar.html#method.notify_one" title="CondVar::notify_one"><code>CondVar::notify_one</code></a> or
<a href="struct.CondVar.html#method.notify_all" title="CondVar::notify_all"><code>CondVar::notify_all</code></a>) or because the thread received a signal.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Guard.html" title="kernel::sync::Guard struct">Guard</a></div><div class="item-right docblock-short"><p>Allows mutual exclusion primitives that implement the <a href="trait.Lock.html" title="Lock"><code>Lock</code></a> trait to automatically unlock
when a guard goes out of scope. It also provides a safe and convenient way to access the data
protected by the lock.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.LockedBy.html" title="kernel::sync::LockedBy struct">LockedBy</a></div><div class="item-right docblock-short"><p>Allows access to some data to be serialised by a lock that does not wrap it.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Mutex.html" title="kernel::sync::Mutex struct">Mutex</a></div><div class="item-right docblock-short"><p>Exposes the kernel’s <a href="../../../include/linux/mutex.h"><code>struct mutex</code></a>. When multiple threads attempt to lock the same mutex,
only one at a time is allowed to progress, the others will block (sleep) until the mutex is
unlocked, at which point another thread will be allowed to wake up and make progress.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ReadLock.html" title="kernel::sync::ReadLock struct">ReadLock</a></div><div class="item-right docblock-short"><p>A marker for locks that only allow reading.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Ref.html" title="kernel::sync::Ref struct">Ref</a></div><div class="item-right docblock-short"><p>A reference-counted pointer to an instance of <code>T</code>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.RefBorrow.html" title="kernel::sync::RefBorrow struct">RefBorrow</a></div><div class="item-right docblock-short"><p>A borrowed <a href="struct.Ref.html" title="Ref"><code>Ref</code></a> with manually-managed lifetime.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.RevocableMutex.html" title="kernel::sync::RevocableMutex struct">RevocableMutex</a></div><div class="item-right docblock-short"><p>A mutex whose contents can become inaccessible at runtime.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.RevocableMutexGuard.html" title="kernel::sync::RevocableMutexGuard struct">RevocableMutexGuard</a></div><div class="item-right docblock-short"><p>A guard that allows access to a revocable object and keeps it alive.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.RwSemaphore.html" title="kernel::sync::RwSemaphore struct">RwSemaphore</a></div><div class="item-right docblock-short"><p>Exposes the kernel’s <a href="../../../include/linux/rwsem.h"><code>struct rw_semaphore</code></a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.SeqLock.html" title="kernel::sync::SeqLock struct">SeqLock</a></div><div class="item-right docblock-short"><p>Exposes sequential locks backed by the kernel’s <code>seqcount_t</code>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.SeqLockReadGuard.html" title="kernel::sync::SeqLockReadGuard struct">SeqLockReadGuard</a></div><div class="item-right docblock-short"><p>Allows read-side access to data protected by a sequential lock.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.SpinLock.html" title="kernel::sync::SpinLock struct">SpinLock</a></div><div class="item-right docblock-short"><p>Exposes the kernel’s <a href="../../../include/linux/spinlock.h"><code>spinlock_t</code></a>. When multiple CPUs attempt to lock the same spinlock, only
one at a time is allowed to progress, the others will block (spinning) until the spinlock is
unlocked, at which point another CPU will be allowed to make progress.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.UniqueRef.html" title="kernel::sync::UniqueRef struct">UniqueRef</a></div><div class="item-right docblock-short"><p>A refcounted object that is known to have a refcount of 1.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.WriteLock.html" title="kernel::sync::WriteLock struct">WriteLock</a></div><div class="item-right docblock-short"><p>A marker for locks that allow reading and writing.</p>
</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.CreatableLock.html" title="kernel::sync::CreatableLock trait">CreatableLock</a></div><div class="item-right docblock-short"><p>A generic mutual exclusion primitive that can be instantiated generically.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Lock.html" title="kernel::sync::Lock trait">Lock</a></div><div class="item-right docblock-short"><p>A generic mutual exclusion primitive.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.LockInfo.html" title="kernel::sync::LockInfo trait">LockInfo</a></div><div class="item-right docblock-short"><p>Specifies properties of a lock.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.NeedsLockClass.html" title="kernel::sync::NeedsLockClass trait">NeedsLockClass</a></div><div class="item-right docblock-short"><p>A trait for types that need a lock class during initialisation.</p>
</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.cond_resched.html" title="kernel::sync::cond_resched fn">cond_resched</a></div><div class="item-right docblock-short"><p>Reschedules the caller’s task if needed.</p>
</div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="kernel" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.59.0 (9d1b2106e 2022-02-23)" ></div>
</body></html>