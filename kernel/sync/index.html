<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `sync` mod in crate `kernel`."><meta name="keywords" content="rust, rustlang, rust-lang, sync"><title>kernel::sync - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled ><script id="default-settings"></script><script src="../../storage.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../../favicon.svg">
<link rel="alternate icon" type="image/png" href="../../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../kernel/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo.png' alt='logo'></div></a><p class="location">Module sync</p><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li></ul></div><p class="location"><a href="../index.html">kernel</a></p><div id="sidebar-vars" data-name="sync" data-ty="mod" data-relpath="../"></div><script defer src="../sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><script src="../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" class="help-button">?</button>
                <a id="settings-menu" href="../../settings.html"><img src="../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">kernel</a>::<wbr><a class="mod" href="">sync</a></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/kernel/sync/mod.rs.html#3-68" title="goto source code">[src]</a></span></h1><div class="docblock"><p>Synchronisation primitives.</p>
<p>This module contains the kernel APIs related to synchronisation that have been ported or
wrapped for usage by Rust code in the kernel and is shared by all of them.</p>
<h1 id="example" class="section-header"><a href="#example">Example</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">fn</span> <span class="ident">test</span>() {
    <span class="comment">// SAFETY: `init` is called below.</span>
    <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="ident">alloc</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>::<span class="ident">pin</span>(<span class="kw">unsafe</span> { <span class="ident">Mutex</span>::<span class="ident">new</span>(<span class="number">0</span>) });
    <span class="macro">mutex_init</span><span class="macro">!</span>(<span class="ident">data</span>.<span class="ident">as_ref</span>(), <span class="string">&quot;test::data&quot;</span>);
    <span class="kw-2">*</span><span class="ident">data</span>.<span class="ident">lock</span>() <span class="op">=</span> <span class="number">10</span>;
    <span class="macro">pr_info</span><span class="macro">!</span>(<span class="string">&quot;{}\n&quot;</span>, <span class="kw-2">*</span><span class="ident">data</span>.<span class="ident">lock</span>());
}</pre></div>
</div><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2>
<table><tr class="module-item"><td><a class="struct" href="struct.CondVar.html" title="kernel::sync::CondVar struct">CondVar</a></td><td class="docblock-short"><p>Exposes the kernel's <a href="../include/linux/wait.h"><code>struct wait_queue_head</code></a> as a condition variable. It allows the caller to
atomically release the given lock and go to sleep. It reacquires the lock when it wakes up. And
it wakes up when notified by another thread (via <a href="../../kernel/sync/struct.CondVar.html#method.notify_one" title="CondVar::notify_one"><code>CondVar::notify_one</code></a> or
<a href="../../kernel/sync/struct.CondVar.html#method.notify_all" title="CondVar::notify_all"><code>CondVar::notify_all</code></a>) or because the thread received a signal.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.Guard.html" title="kernel::sync::Guard struct">Guard</a></td><td class="docblock-short"><p>Allows mutual exclusion primitives that implement the <a href="../../kernel/sync/trait.Lock.html" title="Lock"><code>Lock</code></a> trait to automatically unlock
when a guard goes out of scope. It also provides a safe and convenient way to access the data
protected by the lock.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.LockedBy.html" title="kernel::sync::LockedBy struct">LockedBy</a></td><td class="docblock-short"><p>Allows access to some data to be serialised by a lock that does not wrap it.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.Mutex.html" title="kernel::sync::Mutex struct">Mutex</a></td><td class="docblock-short"><p>Exposes the kernel's <a href="../include/linux/mutex.h"><code>struct mutex</code></a>. When multiple threads attempt to lock the same mutex,
only one at a time is allowed to progress, the others will block (sleep) until the mutex is
unlocked, at which point another thread will be allowed to wake up and make progress.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.Ref.html" title="kernel::sync::Ref struct">Ref</a></td><td class="docblock-short"><p>A reference-counted pointer to an instance of <code>T</code>.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.RefCount.html" title="kernel::sync::RefCount struct">RefCount</a></td><td class="docblock-short"><p>Holds the reference count of an object.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.SpinLock.html" title="kernel::sync::SpinLock struct">SpinLock</a></td><td class="docblock-short"><p>Exposes the kernel's <a href="../include/linux/spinlock.h"><code>spinlock_t</code></a>. When multiple CPUs attempt to lock the same spinlock, only
one at a time is allowed to progress, the others will block (spinning) until the spinlock is
unlocked, at which point another CPU will be allowed to make progress.</p>
</td></tr></table><h2 id="traits" class="section-header"><a href="#traits">Traits</a></h2>
<table><tr class="module-item"><td><a class="trait" href="trait.Lock.html" title="kernel::sync::Lock trait">Lock</a></td><td class="docblock-short"><p>A generic mutual exclusion primitive.</p>
</td></tr><tr class="module-item"><td><a class="trait" href="trait.NeedsLockClass.html" title="kernel::sync::NeedsLockClass trait">NeedsLockClass</a></td><td class="docblock-short"><p>A trait for types that need a lock class during initialisation.</p>
</td></tr><tr class="module-item"><td><a class="trait" href="trait.RefCounted.html" title="kernel::sync::RefCounted trait">RefCounted</a></td><td class="docblock-short"><p>Trait for reference counted objects.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><div id="rustdoc-vars" data-root-path="../../" data-current-crate="kernel"></div>
    <script src="../../main.js"></script><script defer src="../../search-index.js"></script></body></html>